# Introducing EC2
1. **EC2 Overview:**
    - EC2 stands for Elastic Compute Cloud and provides secure, resizable compute capacity in the cloud.
    - It's like a virtual machine hosted in AWS, offering complete control and flexibility over instances.
2. **Benefits of EC2:**
    - Pay only for what you use with a pay-as-you-go model, changing the economics of computing.
    - Avoid wasted capacity seen in physical servers by scaling capacity as needed.
    - Provision servers in minutes compared to the lengthy process in traditional data centers.
3. **Game-Changing Impact:**
    - AWS and EC2 were game-changers in the IT industry, introducing the first virtual machine in a public cloud.
    - Revolutionized computing economics by allowing precise capacity selection and immediate provisioning.
4. **Exam Tips for EC2:**
    - EC2 is akin to a virtual machine hosted by AWS, offering scalability and cost-effectiveness.
    - Select capacity as needed, pay for actual usage, and enjoy rapid infrastructure deployment compared to traditional methods.

Understanding EC2's role as a cloud-based virtual machine with on-demand scalability and rapid provisioning is crucial for leveraging AWS effectively.

# EC2 Pricing Options
1. **On-Demand Instances:**
    - Pay by the hour or second, ideal for flexible workloads without upfront commitments.
2. **Reserved Instances:**
    - Reserve capacity for 1 or 3 years, offering up to a 72% discount on the hourly charge.
    - Great for predictable workloads and specific capacity requirements.
3. **Spot Instances:**
    - Purchase unused capacity at a discount of up to 90%.
    - Prices fluctuate based on supply and demand, suitable for flexible start/end time applications.
4. **Dedicated Hosts:**
    - Physical EC2 server dedicated for your use.
    - Ideal for compliance requirements or software licenses tied to physical hardware.
5. **Savings Plans:**
    - Save up to 72% on all AWS compute usage with commitments for 1 or 3 years.
    - Includes various AWS services like EC2, Lambda, and Fargate.

[AWS Pricing Calculator](https://calculator.aws/#/)

[Instance purchasing options](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-purchasing-options.html)

# EC2 Instance Types
1. **General Purpose**:
    - Provides a balance of compute, memory, and network.
    - Suitable for small or medium databases, web servers, and code repositories.
2. **Compute Optimized**:
    - Offers higher CPU power for compute-intensive applications.
    - Ideal for batch processing, distributed analytics, media transcoding, and high-performance science/engineering apps.
3. **Memory Optimized**:
    - Designed for workloads processing large data sets in memory.
    - Suitable for memory-intensive workloads and in-memory databases.
4. **Accelerated Computing**:
    - Includes special hardware accelerators for graphics processing, data pattern matching, floating-point calculations, and machine learning workloads.
    - Includes instances with CPUs optimized for deep learning.
5. **Storage Optimized**:
    - Allows adding large amounts of storage to EC2 instances.
    - Suitable for applications requiring specific disk I/O and storage capacity like NoSQL databases, data warehousing, Elasticsearch, big data analytics.

Instance types are grouped into families based on their capabilities, and you should choose an instance type based on your application's requirements. Each instance type offers different compute, memory, and storage capabilities, so selecting the appropriate instance type ensures optimal performance for your workload.

Exam tips:

- Instance types determine the hardware configuration and capabilities of the host computer.
- Choose the instance type based on your application's requirements.
- Understand the characteristics of each instance family to make informed decisions.

[EC2 Instance Types](https://aws.amazon.com/ec2/instance-types/)

# Demo - Launching an EC2 Instance

1. **Accessing AWS Console**:
    - Log in to your AWS Free Tier account or use Cloud Playground if available.
2. **Launching EC2 Instance**:
    - Navigate to the EC2 service in the AWS Management Console.
    - Click on "Launch Instance" and follow the configuration steps.
3. **Instance Configuration**:
    - Choose an appropriate AMI (Amazon Machine Image) like Amazon Linux 2.
    - Select the instance type based on your application's requirements (e.g., t3.micro for a simple web server).
    - Create a new key pair for SSH access.
    - Configure network settings, security groups (firewall rules), storage, and other advanced details as needed.
4. **Connecting to the Instance**:
    - Download the private key (.pem) file and set permissions using chmod400.
    - Use SSH to connect to the instance with the public IP address and private key.
5. **Setting Up the Web Server**:
    - Update the operating system and install the Apache web server using yum commands.
    - Start and enable Apache to run automatically at boot time.
    - Create a simple HTML file (e.g., index.html) in /var/www/html directory to serve as the web page.
6. **Accessing the Web Page**:
    - Use the public IP address of the EC2 instance in a browser to access the web page.
7. **Terminating the Instance**:
    - After finishing the exercise, terminate the instance to avoid unnecessary charges.

# Demo - How to Use Putty
1. **Download and Install Putty**:
    - Go to the Putty download page and download the latest version suitable for your Windows machine (32-bit or 64-bit).
    - Install Putty and Puttygen on your local machine. You may want to place shortcuts to these utilities on your desktop for easy access.
2. **Launch EC2 Instance**:
    - Access the AWS Management Console and navigate to the EC2 service.
    - Launch a new EC2 instance, choosing the Amazon Linux 2 AMI and the desired instance type.
    - Configure security groups to allow SSH access from your IP address or open to the world for demo purposes (not recommended for production).
3. **Download Key Pair (.pem file)**:
    - Download the key pair (.pem file) generated during the instance launch process.
4. **Convert .pem to .ppk Format**:
    - Open Puttygen and load the .pem file.
    - Save the private key in .ppk format, providing a passphrase if desired.
    - Save the .ppk file on your local machine.
5. **Configure Putty**:
    - Open Putty and enter the EC2 instance's public IP address, username (usually ec2-user), and the path to the .ppk private key under SSH > Auth.
    - Save the session configuration for future use.
6. **Connect to EC2 Instance**:
    - Open the saved Putty session to connect to the EC2 instance.
    - Accept the server's host key when prompted.
7. **Adjust Appearance (Optional)**:
    - Customize Putty appearance settings such as font size and colors as per your preference.
8. **Run Commands on EC2 Instance**:
    - Once connected, you can run commands on the EC2 instance using the terminal in Putty. For example, you can update the operating system using 'sudo yum update -y'.

[Download PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)

[AWS Putty User Guide](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html)

# Demo - Using EC2 Instance Connect
1. **Launch an EC2 Instance**:
    - Access the AWS Management Console and navigate to the EC2 service.
    - Launch a new EC2 instance, selecting the desired Amazon Linux AMI and instance type (e.g., t3.micro).
    - Create a new key pair or use an existing one. Ensure that the security group associated with the instance allows SSH access from anywhere.
2. **Connect to the Instance using EC2 Instance Connect**:
    - Once the instance is running, select the instance ID in the EC2 console.
    - Click on the "Connect" button and choose "EC2 Instance Connect."
    - Follow the prompts to start a remote session on the EC2 instance.
3. **Perform Administrative Tasks**:
    - Within the EC2 Instance Connect session, run commands to administer the instance. For example, you can update the operating system using **`sudo yum update -y`** or install software like the Apache Web server.

EC2 Instance Connect provides a convenient and straightforward way to connect to EC2 instances directly from the AWS console without the need to manage SSH keys on your local machine.

[Connect to your Linux instance using EC2 Instance Connect](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/connect-linux-inst-eic.html)

[General prerequisites for connecting to your instance](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/connect-to-linux-instance.html)

# Understanding EBS Volumes
1. **What are EBS Volumes?**
    - EBS (Elastic Block Store) volumes are storage volumes that can be attached to EC2 instances, similar to disks in local computers.
    - They are used for storing operating systems, data, databases, applications, and more.
2. **Features of EBS Volumes:**
    - Highly available: EBS volumes are automatically replicated within a single availability zone, protecting against hardware failures.
    - Highly scalable: Capacity can be increased dynamically without downtime or performance impact.
3. **Types of EBS Volumes:**
a. **General Purpose SSD (gp2/gp3):**
    - Balanced price and performance.
    - Suitable for boot volumes, development, and non-latency-sensitive applications.
    - gp3 is the latest generation with a baseline of 3,000 IOPS for any volume size.
    
    b. **Provisioned IOPS SSD (io1/io2):**
    
    - High-performance option with up to 64,000 IOPS per volume.
    - Suitable for latency-sensitive applications and large databases.
    - io2 offers higher durability and 500 IOPS per GiB.
    
    c. **Throughput Optimized HDD (st1):**
    
    - Suitable for large datasets accessed frequently.
    - Measured in MB/s per terabyte, with a maximum throughput of 500 MB/s per volume.
    - Ideal for big data, data warehouses, and ETL operations.
    
    d. **Cold HDD (sc1):**
    
    - Lowest cost option with a baseline throughput of 12 MB/s per terabyte.
    - Burst throughput up to 80 MB/s per terabyte, maxing at 250 MB/s per volume.
    - Suitable for less frequently accessed data and cost-sensitive applications.
    
    e. **io2 Block Express (Provisioned IOPS SSD):**
    
    - Offers SAN-level performance in the cloud.
    - Supports up to 64 TB and 256,000 IOPS per volume with 99.999% durability.
    - Ideal for mission-critical databases like SAP HANA, Oracle, etc.
4. **Exam Tips for EBS Volumes:**
    - Understand the differences between gp2, gp3, io1, io2, st1, and sc1.
    - Consider use cases for each type based on performance, cost, and durability requirements.
    - Review the AWS documentation for a comprehensive comparison of EBS volume types.

[Amazon EBS volume types documentation](https://docs.aws.amazon.com/ebs/latest/userguide/ebs-volume-types.html)

[Amazon EBS volume types](https://aws.amazon.com/ebs/volume-types/)

#  Demo - Creating an EBS Volume
1. **Launch an EC2 Instance:**
    - Navigate to the EC2 console and launch an instance, such as the Amazon Linux AMI, with default configurations.
    - Note the availability zone (e.g., US East 1C) where your instance is created.
2. **Create an EBS Volume:**
    - In the EC2 console, go to EBS volumes and select "Create Volume."
    - Choose the desired volume type (e.g., GP2, GP3, IO1, IO2, SC1, ST1).
    - Set the size of the volume, considering the IOPS (I/O operations per second) requirements.
    - Ensure the volume is created in the same availability zone as your EC2 instance.
    - Optionally, you can create a volume based on a snapshot or enable encryption using KMS (Key Management Service).
3. **Attach the Volume to EC2 Instance:**
    - Once the volume is created and available, select it and choose "Attach Volume" from the actions menu.
    - Select the EC2 instance to which you want to attach the volume and specify the device name.
    - Complete the attachment process, and the volume state will change to "in use."
4. **Considerations for Encryption:**
    - Encryption settings depend on account-level configurations:
        - If encryption by default is enabled, all volumes will be encrypted, and you cannot create unencrypted volumes.
        - Creating a volume from an encrypted snapshot results in an encrypted volume.
        - If default encryption is not enabled, encryption is optional when creating volumes unless an encrypted snapshot is used.
5. **Final Steps:**
    - Verify that the volume is successfully attached to the EC2 instance and in use.
    - Refresh the console if needed to update the volume state.

Remember these key points regarding encryption settings based on account configurations and the options available when creating EBS volumes.

# Elastic Load Balancer
1. **Load Balancer Overview:**
    - A load balancer distributes network traffic across a group of servers, ensuring efficient utilization and fault tolerance.
    - It can route requests to servers based on algorithms like least busy or round-robin.
    - Load balancers are scalable, allowing easy capacity adjustments to handle traffic spikes.
2. **AWS Elastic Load Balancer Options:**
    - **Application Load Balancer (ALB):** Ideal for HTTP and HTTPS traffic at Layer 7 of the OSI model. It supports advanced request routing based on HTTP headers.
    - **Network Load Balancer (NLB):** Offers high-performance TCP load balancing at Layer 4, capable of handling millions of requests with low latencies.
    - **Classic Load Balancer:** Legacy option supporting HTTP, HTTPS, and TCP protocols. It includes features like X-Forwarded-For headers and sticky sessions.
    - **Gateway Load Balancer:** Designed for load balancing workloads of third-party virtual appliances in AWS, such as firewalls and intrusion detection systems.
3. **Understanding OSI Model Layers:**
    - The OSI model defines seven layers from the application layer (Layer 7) down to the physical layer (Layer 1), each handling specific functions in network communication.
    - ALB operates at Layer 7, making it application-aware and suitable for HTTP-based routing.
4. **X-Forwarded-For Header:**
    - An HTTP header used by load balancers to reveal the originating client's IP address to the backend servers, overcoming the challenge of obscured IP addresses due to load balancing.
5. **Common Load Balancer Errors:**
    - Error 504 (Gateway Timeout) indicates that the target server failed to respond, often due to application issues or slow response times, as seen in online payment scenarios.
6. **Exam Tips for Elastic Load Balancer:**
    - ALB for HTTP/HTTPS with intelligent routing based on HTTP headers.
    - NLB for high-performance TCP load balancing.
    - Classic Load Balancer for legacy support and Layer 4/7 functionalities.
    - Gateway Load Balancer for third-party virtual appliances.
    - Utilize X-Forwarded-For header to retrieve client IP addresses.

Remember these key concepts for Elastic Load Balancer types, OSI model layers, X-Forwarded-For header usage, common load balancer errors, and exam preparation tips.

[Elastic Load Balancing features](https://aws.amazon.com/elasticloadbalancing/features/)

[Gateway Load Balancer](https://aws.amazon.com/elasticloadbalancing/gateway-load-balancer/)

[AWS Elastic Load Balancing: Support for SSL Termination](https://aws.amazon.com/blogs/aws/elastic-load-balancer-support-for-ssl-termination/)

[Create an HTTPS listener for your Application Load Balancer](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/create-https-listener.html)

[Troubleshoot your Application Load Balancers](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-troubleshooting.html)

# Demo- Route 53
1. **Route 53 Overview:**
    - Route 53 is Amazon's DNS service that maps domain names to AWS resources like EC2 instances, load balancers, and S3 buckets.
    - It provides domain registration, DNS routing, and health checking services.
2. **Demo Steps:**
    - Launched an EC2 instance named "My web server" running Amazon Linux with httpd installed.
    - Configured the instance's security group to allow HTTP traffic on port 80.
    - Created an Application Load Balancer (ALB) named "myalb" for HTTP traffic in two availability zones.
    - Configured a target group ("mytg") for the ALB with the EC2 instance as the target.
    - Used user data in the EC2 instance to run a bootstrap script for setting up httpd.
    - Set up health checks for the ALB to monitor the EC2 instance's health.
3. **Route 53 Configuration:**
    - Created a hosted zone in Route 53 for the domain name.
    - Added an A record alias to map the domain name to the ALB's DNS address using Route 53's alias feature.
    - Configured the routing policy as simple routing to route traffic to the ALB.
4. **Accessing the Website:**
    - Accessed the website using the domain name mapped through Route 53, providing a user-friendly URL for accessing the application.
5. **Recap and Exam Tips:**
    - Route 53 enables mapping domain names to AWS resources for easy access.
    - Understanding how to create hosted zones, DNS records, and alias routing is crucial for AWS exams involving Route 53.

Overall, Route 53 simplifies DNS management and enables users to create custom domain names for AWS resources, enhancing accessibility and branding.

``` php
#!/bin/bash  
#bootstrap.sh
yum update -y
yum install httpd -y
echo "<html><body><h1>Hello Cloud Gurus</h1></body></html>" >/var/www/html/index.html
systemctl start httpd
systemctl enable httpd
```
